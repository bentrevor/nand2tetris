require 'spec_helper'

describe Code do
  it 'knows the jump commands' do
    expect(Code.jump(nil)).to eq '000'
    expect(Code.jump('JGT')).to eq '001'
    expect(Code.jump('JEQ')).to eq '010'
    expect(Code.jump('JGE')).to eq '011'
    expect(Code.jump('JLT')).to eq '100'
    expect(Code.jump('JNE')).to eq '101'
    expect(Code.jump('JLE')).to eq '110'
    expect(Code.jump('JMP')).to eq '111'
  end

  it 'knows the dest commands' do
    expect(Code.dest(nil)).to eq '000'
    expect(Code.dest('M')).to eq '001'
    expect(Code.dest('D')).to eq '010'
    expect(Code.dest('MD')).to eq '011'
    expect(Code.dest('A')).to eq '100'
    expect(Code.dest('AM')).to eq '101'
    expect(Code.dest('AD')).to eq '110'
    expect(Code.dest('AMD')).to eq '111'
  end

  it 'knows the comp commands' do
    expect(Code.comp('0')).to eq '0101010'
    expect(Code.comp('1')).to eq '0111111'
    expect(Code.comp('-1')).to eq '0111010'
    expect(Code.comp('D')).to eq '0001100'
    expect(Code.comp('A')).to eq '0110000'
    expect(Code.comp('!D')).to eq '0001101'
    expect(Code.comp('!A')).to eq '0110001'
    expect(Code.comp('-D')).to eq '0001111'
    expect(Code.comp('-A')).to eq '0110011'
    expect(Code.comp('D+1')).to eq '0011111'
    expect(Code.comp('A+1')).to eq '0110111'
    expect(Code.comp('D-1')).to eq '0001110'
    expect(Code.comp('A-1')).to eq '0110010'
    expect(Code.comp('D+A')).to eq '0000010'
    expect(Code.comp('D-A')).to eq '0010011'
    expect(Code.comp('A-D')).to eq '0000111'
    expect(Code.comp('D&A')).to eq '0000000'
    expect(Code.comp('D|A')).to eq '0010101'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('M')).to eq '1110000'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('!M')).to eq '1110001'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('-M')).to eq '1110011'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('M+1')).to eq '1110111'
    expect(Code.comp('')).to eq 'xxxxxxx'
    expect(Code.comp('M-1')).to eq '1110010'
    expect(Code.comp('D+M')).to eq '1000010'
    expect(Code.comp('D-M')).to eq '1010011'
    expect(Code.comp('M-D')).to eq '1000111'
    expect(Code.comp('D&M')).to eq '1000000'
    expect(Code.comp('D|M')).to eq '1010101'
  end
end
